{"ast":null,"code":"import _slicedToArray from\"/home/paul/Repos/WedSite/wedsite/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import RsvpIndividual from'./RsvpIndividual';import RsvpList from'./RsvpList';import RsvpAdd from'./RsvpAdd';import{GetList,RemovePerson,EditInvite}from'../../../Data/Database';import{Button}from'../../Common/Static';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function RsvpAdmin(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),individual=_useState2[0],setIndividual=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),list=_useState6[0],setList=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),openForm=_useState8[0],setOpenForm=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),removeError=_useState10[0],setRemoveError=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),serverError=_useState12[0],setServerError=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),display=_useState14[0],setDisplay=_useState14[1];function toggleList(){setIndividual(!individual);}function toggleForm(){setOpenForm(!openForm);}function copyEmails(){var emailListSting='';list.forEach(function(person){emailListSting=emailListSting+' '+person.email;});navigator.clipboard.writeText(emailListSting);}function removePerson(person){RemovePerson(person,props.auth).then(function(data){if(data.statusCode===203){setRemoveError(person.name);}else{setIndividual(false);var newList=list.filter(function(listPerson){return listPerson.name!==data.data;});setList(newList);setDisplay(newList);}}).catch(function(){setServerError(true);});}function addPerson(person){list.push(person);setDisplay(list);setList(list);}function editPerson(oldName,newName){EditInvite(newName,oldName,props.auth).then(function(){var newList=list.map(function(invite){if(invite.name===oldName){invite.name=newName;return invite;}return invite;});setList(newList);setDisplay(newList);setIndividual(false);}).catch(function(){setServerError(true);});}function filterList(regex){var newList=list.filter(function(person){return person.name.toLowerCase().replace(/\\s/g,'').match(regex);});if(newList.length){setDisplay(newList);}}useEffect(function(){GetList(props.auth).then(function(data){setList(JSON.parse(data.data));setDisplay(JSON.parse(data.data));}).catch(function(err){console.log('Error :',err);});},[props.auth]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:openForm?'Add Rsvp':individual?'Rsvp':'Rsvp List'}),/*#__PURE__*/_jsxs(\"div\",{className:\"rsvpadmin\",children:[removeError!==''?/*#__PURE__*/_jsxs(\"p\",{children:[removeError,\" does not exist\"]}):null,serverError?/*#__PURE__*/_jsx(\"p\",{children:\"There is a server error\"}):null,openForm?/*#__PURE__*/_jsx(RsvpAdd,{auth:props.auth,toggleForm:toggleForm,addPerson:addPerson}):individual?/*#__PURE__*/_jsx(RsvpIndividual,{auth:props.auth,toggleList:toggleList,selected:selected,removePerson:removePerson,editPerson:editPerson}):/*#__PURE__*/_jsx(RsvpList,{setSelected:setSelected,list:display,toggleList:toggleList,filterList:filterList}),openForm||individual?null:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{text:\"Add Invite\",clickAction:toggleForm,className:\"addInviteButton\"}),/*#__PURE__*/_jsx(Button,{text:\"Copy Emails\",clickAction:copyEmails,className:\"copyEmails\"})]})]})]});}","map":{"version":3,"sources":["/home/paul/Repos/WedSite/wedsite/src/Layout/Main/Rsvp/RsvpAdmin.js"],"names":["React","useEffect","useState","RsvpIndividual","RsvpList","RsvpAdd","GetList","RemovePerson","EditInvite","Button","RsvpAdmin","props","individual","setIndividual","selected","setSelected","list","setList","openForm","setOpenForm","removeError","setRemoveError","serverError","setServerError","display","setDisplay","toggleList","toggleForm","copyEmails","emailListSting","forEach","person","email","navigator","clipboard","writeText","removePerson","auth","then","data","statusCode","name","newList","filter","listPerson","catch","addPerson","push","editPerson","oldName","newName","map","invite","filterList","regex","toLowerCase","replace","match","length","JSON","parse","err","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport RsvpIndividual from './RsvpIndividual'\nimport RsvpList from './RsvpList'\nimport RsvpAdd from './RsvpAdd'\nimport { GetList, RemovePerson, EditInvite } from '../../../Data/Database'\nimport { Button } from '../../Common/Static'\n\nexport default function RsvpAdmin(props) {\n  const [individual, setIndividual] = useState(false)\n  const [selected, setSelected] = useState({})\n  const [list, setList] = useState([])\n  const [openForm, setOpenForm] = useState(false)\n  const [removeError, setRemoveError] = useState('')\n  const [serverError, setServerError] = useState(false)\n  const [display, setDisplay] = useState([])\n\n  function toggleList() {\n    setIndividual(!individual)\n  }\n  function toggleForm() {\n    setOpenForm(!openForm)\n  }\n\n  function copyEmails() {\n    let emailListSting = ''\n    list.forEach((person) => {\n      emailListSting = emailListSting + ' ' + person.email\n    })\n    navigator.clipboard.writeText(emailListSting)\n  }\n\n  function removePerson(person) {\n    RemovePerson(person, props.auth)\n      .then((data) => {\n        if (data.statusCode === 203) {\n          setRemoveError(person.name)\n        } else {\n          setIndividual(false)\n          let newList = list.filter(\n            (listPerson) => listPerson.name !== data.data\n          )\n          setList(newList)\n          setDisplay(newList)\n        }\n      })\n      .catch(() => {\n        setServerError(true)\n      })\n  }\n  function addPerson(person) {\n    list.push(person)\n    setDisplay(list)\n    setList(list)\n  }\n\n  function editPerson(oldName, newName) {\n    EditInvite(newName, oldName, props.auth)\n      .then(() => {\n        let newList = list.map((invite) => {\n          if (invite.name === oldName) {\n            invite.name = newName\n            return invite\n          }\n          return invite\n        })\n        setList(newList)\n        setDisplay(newList)\n        setIndividual(false)\n      })\n      .catch(() => {\n        setServerError(true)\n      })\n  }\n\n  function filterList(regex) {\n    let newList = list.filter((person) =>\n      person.name.toLowerCase().replace(/\\s/g, '').match(regex)\n    )\n    if (newList.length) {\n      setDisplay(newList)\n    }\n  }\n\n  useEffect(() => {\n    GetList(props.auth)\n      .then((data) => {\n        setList(JSON.parse(data.data))\n        setDisplay(JSON.parse(data.data))\n      })\n      .catch((err) => {\n        console.log('Error :', err)\n      })\n  }, [props.auth])\n\n  return (\n    <>\n      <h2>{openForm ? 'Add Rsvp' : individual ? 'Rsvp' : 'Rsvp List'}</h2>\n      <div className='rsvpadmin'>\n        {removeError !== '' ? <p>{removeError} does not exist</p> : null}\n        {serverError ? <p>There is a server error</p> : null}\n        {openForm ? (\n          <RsvpAdd\n            auth={props.auth}\n            toggleForm={toggleForm}\n            addPerson={addPerson}\n          />\n        ) : individual ? (\n          <RsvpIndividual\n            auth={props.auth}\n            toggleList={toggleList}\n            selected={selected}\n            removePerson={removePerson}\n            editPerson={editPerson}\n          />\n        ) : (\n          <RsvpList\n            setSelected={setSelected}\n            list={display}\n            toggleList={toggleList}\n            filterList={filterList}\n          />\n        )}\n        {openForm || individual ? null : (\n          <>\n            <Button\n              text='Add Invite'\n              clickAction={toggleForm}\n              className='addInviteButton'\n            />\n            <Button\n              text='Copy Emails'\n              clickAction={copyEmails}\n              className='copyEmails'\n            />\n          </>\n        )}\n      </div>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}